image: openjdk:11
pipelines:
  default:
  - step:
      caches:
      - gradle
      - gradlewrapper
      script:
      - ./gradlew build jacocoTestReport jacocoRootReport
      - ./gradlew sonarqube -Dsonar.projectKey=tangly-os-at-tangly.net -Dsonar.organization=tangly-os -Dsonar.host.url=https://sonarcloud.io -Dsonar.login=$SONAR_TOKEN
definitions:
  caches:
    gradlewrapper: ~/.gradle/wrapper
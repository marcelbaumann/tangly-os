---
title: "Value Objects as Embedded Entities"
linkTitle: "Value Objects"
date: 2021-01-10
tags: ["design", "crm"]
---

== Value Objects as Embedded Entities
:author: Marcel Baumann
:email: <marcel.baumann@tangly.net>
:homepage: https://www.tangly.net/
:company: https://www.tangly.net/[tangly llc]
:copyright: CC-BY-SA 4.0

image::2021-01-01-head.jpg[720, 480, role=left]

=== Value Objects

This post is about the value object pattern and the factory pattern which are tactical patterns in domain driven design (DDD).
Value objects define the second kind of domain objects besides entities.
Their main characteristic is immutability: _Attributes of a value object never change_.

Value objects do have attributes and methods as entities.
Attributes of value objects are immutable though which implies that methods of value objects can only be queries, never commands that change the internal state of an object.
We can pass value objects to clients through getters for example without worrying that they change them.

Many objects can be modeled as value objects instead of entities because they are defined through their attributes.
These objects measure, quantify or describe things in the domain model.
Because they are so easy to handle we should model as many value objects as possible.

=== Design Decisions

==== Addresses, Phone Numbers, Email Addresses

==== Invoice Lines

=== Factories

The factory pattern in DDD can be seen as a super pattern for the Gang of Four (GoF) creational patterns.
Factories are concerned with creating new entities and value objects.
They also validate the invariants for the newly created objects.
We can place a factory on the entity or value object itself or an independent object.

Factories that are placed on the same object they create are either factory methods or prototype methods.
The factory method creates a completely new object from the method parameters.
The prototype method uses an existing instance to derive a new object.

When the creation logic is complex or has dependencies that are not needed by the created object it is best to create a separate factory.
This factory could then provide multiple ways to create new instances.

==== Value Objects in Persistent Store
